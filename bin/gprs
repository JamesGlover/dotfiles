#!/usr/bin/env ruby
# sudo wvdialconf
# Add to /etc/wvdial.conf for Eplus: 
#   Init3 = AT+CGDCONT=1,"IP","internet.eplus.de"
#   Phone = *99#
#   Password = gprs
#   Username = eplus
# Others: http://wiki.ubuntuusers.de/UMTS_per_Mobiltelefon

# turn off other connections and start connecting
`ifconfig eth0 down`
Process.fork{ `wvdial` }

# if user Ctrl+c`s reconnect eth0
Signal.trap :SIGINT do
  `killall wvdial`
  `ifconfig eth0 up`
end

Process.wait

