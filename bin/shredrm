#! /usr/bin/env ruby
# shread (overwrite with garbadge) every file in a folder before deleting everything
# great for security ...
def sh(cmd)
  puts cmd
  IO.popen(cmd) do |pipe|
    while str = pipe.gets
      puts str
    end
  end
  $?.success?
end

folder = ARGV[0]
raise "give me a folder" if folder.empty?

puts "Shreading everything inside #{folder}"
sh "find '#{folder}' -type f | xargs shred"

puts "Removing folder"
sh "rm -rf #{folder}"

puts "Done"
